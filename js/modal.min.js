function localStorageIsOk(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}var writeUs=document.querySelector(".button-contacts-write-us"),writeUsPopup=document.querySelector(".modal-write-us"),writeUsClose=writeUsPopup.querySelector(".modal-close"),writeUsForm=writeUsPopup.querySelector("form"),writeUsLogin=writeUsPopup.querySelector("[name=name]"),writeUsEmail=writeUsPopup.querySelector("[name=email]"),writeUsMessage=writeUsPopup.querySelector("[name=text]");if(localStorageIsOk())var writeUsLoginCached=localStorage.getItem("writeUsLogin"),writeUsEmailCached=localStorage.getItem("writeUsEmail");else console.log("localStorage is not supported, will not use cached values");var map=document.querySelector(".contacts .contacts-map"),mapPopup=document.querySelector(".modal-map"),mapClose=mapPopup.querySelector(".modal-close");writeUs.addEventListener("click",function(e){e.preventDefault(),writeUsPopup.classList.add("modal-show"),writeUsLoginCached?(writeUsLogin.value=writeUsLoginCached,writeUsEmailCached?(writeUsEmail.value=writeUsEmailCached,writeUsMessage.focus()):writeUsEmail.focus()):writeUsLogin.focus()}),writeUsClose.addEventListener("click",function(e){e.preventDefault(),writeUsPopup.classList.remove("modal-show"),writeUsPopup.classList.remove("modal-error")}),writeUsForm.addEventListener("submit",function(e){writeUsLogin.value&&writeUsEmail.value&&writeUsMessage.value?(localStorage.setItem("writeUsLogin",writeUsLogin.value),localStorage.setItem("writeUsEmail",writeUsEmail.value)):(e.preventDefault(),writeUsPopup.classList.remove("modal-error"),writeUsPopup.offsetWidth=writeUsPopup.offsetWidth,writeUsPopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(writeUsPopup.classList.contains("modal-show")&&(writeUsPopup.classList.remove("modal-show"),writeUsPopup.classList.remove("modal-error")),mapPopup.classList.contains("modal-show")&&mapPopup.classList.remove("modal-show"))}),map.addEventListener("click",function(e){e.preventDefault(),console.log("map here"),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show")});